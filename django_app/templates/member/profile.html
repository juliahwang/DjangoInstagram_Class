{% extends 'common/base.html' %}

{% block content %}
<h2>{{ cur_user }}</h2>
<form action="{% url 'member:follow_toggle_view' user_pk=cur_user.pk %}" method="POST">
    {% csrf_token %}
    {% if user != cur_user %}
        {% if cur_user in user.following %}
            <button type="submit" class="btn">팔로우 해제</button>
        {% else %}
            <button type="submit" class="btn">팔로우</button>
        {% endif %}
    {% endif %}
</form>

<h5>Following</h5>
{% comment %}
{% for relation in cur_user.follow_relation.all %}
    <div>{{ relation.to_user }}</div>
{% endfor %}
{% endcomment %}
{% for following_user in cur_user.following %}
{#    해당 user의 profile페이지로 갈 수 있는 링크 생성    #}
    <div><a href="{% url 'member:profile' user_pk=following_user.pk %}" class="btn">{{ following_user }}</a></div>
{% endfor %}

<h5>Followers</h5>
{% comment %}
{% for relation in cur_user.follower_relation.all %}
    <div>{{ relation.to_user }}</div>
{% endfor %}
{% endcomment %}
{% for followed_user in cur_user.followers %}
    <div><a href="{% url 'member:profile' user_pk=followed_user.pk %}"class="btn">{{ followed_user }}</a></div>
{% endfor %}
<ul class="profile-photo-list">
{% for post in posts %}
    <li>
        <img src="{{ post.photo.url }}" alt="">
    </li>
{% endfor %}
</ul>
    {% if request.GET.page %}
    <a href="?page={{ request.GET.page|add:1 }}" class="btn">더 불러오기</a>
    {% else %}
    <a href="?page=2" class="btn">더 불러오기</a>
    {% endif %}
{% endblock %}